{% if sibling_versions and sibling_versions|length > 1 %}
{% set other_versions = sibling_versions|rejectattr('isCurrent', 'true')|list %}
{% if other_versions|length > 0 %}
<div class="card versions-card">
    <div class="versions-header">
        <h2 class="section-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px; vertical-align: middle;"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
            Other Versions
            <span class="version-count">({{ other_versions|length }})</span>
        </h2>
        <!-- Desktop carousel navigation -->
        <div class="carousel-nav desktop-only">
            <button class="carousel-btn carousel-prev" aria-label="Previous versions" disabled>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
            </button>
            <button class="carousel-btn carousel-next" aria-label="Next versions">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
            </button>
        </div>
    </div>

    <!-- Carousel container for desktop -->
    <div class="versions-carousel-wrapper">
        <div class="versions-carousel" data-total="{{ other_versions|length }}">
            {% for version in other_versions %}
            <a href="{{ version.link }}"
               class="related-version-card {{ 'local' if version.is_local else 'remote' }}"
               {% if not version.is_local %}target="_blank" rel="noopener noreferrer"{% endif %}>
                <div class="version-header">
                    <span class="version-name">{{ version.name }}</span>
                    <span class="version-badge {{ 'local' if version.is_local else 'remote' }}">
                        {% if version.is_local %}
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
                        Local
                        {% else %}
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                        CivitAI
                        {% endif %}
                    </span>
                </div>
                <div class="version-meta">
                    {% if version.baseModel %}
                    <span class="version-base-model">{{ version.baseModel }}</span>
                    {% endif %}
                    {% if version.downloadCount %}
                    <span class="version-downloads">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                        {{ version.downloadCount|default(0) }}
                    </span>
                    {% endif %}
                </div>
                {% if version.createdAt %}
                <div class="version-date">
                    {{ version.createdAt[:10] }}
                </div>
                {% endif %}
            </a>
            {% endfor %}
        </div>
    </div>

    <!-- Mobile expand button (shown only when > 4 versions) -->
    {% if other_versions|length > 4 %}
    <button class="versions-expand-btn mobile-only" aria-expanded="false">
        <span class="expand-text">Show all {{ other_versions|length }} versions</span>
        <span class="collapse-text">Show less</span>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="expand-icon"><polyline points="6 9 12 15 18 9"></polyline></svg>
    </button>
    {% endif %}
</div>
{% endif %}
{% endif %}
